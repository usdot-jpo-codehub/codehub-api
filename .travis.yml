language: node_js
node_js: 4.4.3
cache:
  directories: node_modules
env:
  global:
  - secure: n8GwYQhEkFEbioYb1Al/NwJpZUyv6KJGQXkKaQ7YCIZU89Hdwhv4EEu6Tg96wFfwTNMMgi+FT5boPo29rkoHSjmWEEd9LShKAGiKAewk4iopaxfZo2sw2df7m18q10t0F2ADKCMr7Eeu4XhySTlt7PXeg7Kop4Wm3i4j8XtrJJIcfnn9K4er38xJVK44JcCa/X3zOtt9WYLiMOt69klf6iSdnFT00/iNnqOJzfUP2o9AkF3GjofRdgaxx3Om+Eiht+Pqk74x4dysKPR/iJ689iXkEK8LIoXQx2uLNeHEVKg1moiwzGJlTG2StdABxpiFhTfbp5uGmYrKaYStawrCJ5Kd3ymprbfNFmZ23bZT//ruqzAJkU6V07/x4pLoj/qdMfsvNKPNlBNnjTrk1tdmEzJLKPzW4nK1Bj3HRQKWrtMcLCQPxzHoazAisgH5kjqQJ5hRXGuOtH9s3Cq3zJnnGEqe5/N1fWcE+8n4guN1m+kg+jZpTyfNozTQyAlsnyaaCn0IExGiE9Lj1O3NBAX56XB+pjMyPYk0KfXZRPhNabw7aBJVO2BjmMGve+zhIq8/jnclODFBBPAQVM56UezLr/unDXSfC2ccPus5pbuV6uZSe7ocf3RON6kdTW8z7bBK/0fBijV+3MLCNb2qU18WzdEwaDsXHw41eqBB85HVF7M=
  - HEIMDALL_VERSION_NUMBER=1.0.0
  - HEIMDALL_PACKAGE_NAME=heimdall-api-dev-$HEIMDALL_VERSION_NUMBER.$TRAVIS_BUILD_NUMBER-$TRAVIS_BRANCH.zip
install:
- npm install -g coveralls
- npm install -g strongloop
script:
- slc build --install
before_deploy:
- zip -rq $HEIMDALL_PACKAGE_NAME *
- mkdir -p dpl_cd_upload
- mv $HEIMDALL_PACKAGE_NAME dpl_cd_upload/$HEIMDALL_PACKAGE_NAME
deploy:
- provider: s3
  access_key_id: &1
    secure: dmK4s8fb+OUUxWTAhCJugZbexLUXNsr9ITi93E46V1+3uzU5eDUKk0SMByWb981H8sBFeFu56yJse84nBAELPR6p8L4T92Q128GPuYrKI2n7jqU6gz7nrvaC41SYojjDzDWsRo4M6R8gU+AwSTns07k3pgz+ItX4Px7hTv5co6/vnknMWsYqzwCi2ZqdM8sgU58syscpwDcpC/ykWHf9hDg0B3qMyTKiaUd+m2dO/m07lOm8ayxxS3Phr/UUQeTuREh/dJ9UCdL+lryzAwpk9pKXmj1FEoBEGbzeJE30zG/HzEEwHv+R8LUFXFdJ6deCP3hyVbyRR3dfQF1snBYmBtakbd+mndzAp0TG9Yzza9W4SvAqJeCPRqHDxmzRFGKrLtdSbAYLxNNpilW6OATnPWcSE5pHguFN15wkH4KN7vNYvLbxZfSar1wl83QkIaH//1is2Njq4nFjNTZBQDt6RKtZLYNu6lypHkVm8fKZM58QU2azzmz4HpmWJxQf65gmuesgZkDKBs5bw5XNOD6XGfI8czy9lA3Uaib+Qm+w3pFj2ZpqLoE86/ZbsJQcR/N+ohc9GJOcH/ZTZ+J/v//ibVjnojuKBn4D4zEV18fJ+nq5LmayGDH01CiYsepnf31zDZFZfdlBh2NhjPxZT1PQ4T7pbfbMiRZZmBEWitC1Fok=
  secret_access_key: &2
    secure: vaQYlKnvqISl2Qyu9WV0i4oaDDte8yah/9CJG4wvJK/+dIeErpXezyAPXHwtLF+qrlkMVcFzDL7tCFokXPCWKv9Xf5BlFYbEJYCkr+Qu0lFVlsM1desc3QDIGOgCH2aGGXBEMa3oBt6vp8jCjcXsEJmSu7OmMl/62la4cpveMMx3pL1D7GoO12uuck0tLEJ3sPTlHzv261hAZdVV8JhK3HlzFsdtsEmm485Ju4BM3t5iNzgNL/GPOSBNDpwFgvVzLV4znMVFtcAbQ015zuExRm2CoIjPI4OzBdXWCKHszqRaVdpgirI4j1PywofPK+nJ0t00BJvzY5XFG4gwCxjjy+ZKhdxZM7xirl7d9nmCBeLn6ste1J9SiLW1fHSxAWq3yV7KeL+EPwh3W9Q2cavyyv2aeiwKNAloD3fPgNKc40CVxH2Zi8KUnFxrTEdT/viQUal9zr4xV1U9Ma+nnVvRHw0YhQU+bw/PpfyV4lgehC+ddYyDTItNnJregBZ4Mx5lfr+/cEbADLz5R1PN76YfD7qnGE3faf1j9zGxcMJcZyVTNy6ChH5KF/ILuaWeqNuPNO32/tDdb4Vpu9m5FMdUrshKUObKQscnv6iuigbwG1Dc3hVAEqzTJ6g4L0SKj5jbFKzrszqwDb0AEJTgZ0FgAgrwjQNI5YW7dgYS8wkGrbM=
  local_dir: dpl_cd_upload
  on: &3
    repo: Project-Heimdall/heimdall-webapp
    branch: development
  bucket: dev-heimdall-api-codedeploy
  region: us-west-2
  skip_cleanup: true
- provider: codedeploy
  access_key_id: *1
  secret_access_key: *2
  bucket: dev-heimdall-api-codedeploy
  key: $HEIMDALL_PACKAGE_NAME
  bundle_type: zip
  application: dev-heimdall-api-app
  deployment_group: dev-heimdall-api-app-group
  region: us-east-1
  on: *3
  skip_cleanup: true
notifications:
  slack:
    secure: UQ8y/1HLzbSakJ4YFSZE+yv57VR/Jk2Oab8bKsO36OBM92YKdmYCZqbqesKxKhFOunBmEW2oxXGcN0TmxfCwiR3j6rPTZbsjvyH1xoK1gzrJpk8VmNMIk+LOf3n+1YoScEwFHbalz3df5UNgWd4D02H8WpiVnaNJ7gb+YoxrKYke+vfRc9Q5NKOM8XjEGX4yOfDtKwPIlvDu91jBPA//SFSMZdelVN/gmo2u7MMrE7bJd/hqzG6d53voksqCZ+J+999X6KRxXeTXww0G3rkD13azVEYciTgG96boB/xCu81wHe2gamDLk4cM2IeuBKRPzcern2aB7C2EkycL9raxchs7CGxI7wKTHM4ytOiJFNf6KPy6/BlOJZl9nD85DDTNIdBH9dS48/dmZEO/MYzecSHCquWOPsiTNEIow4sicYI4VJKOj8Zk3Fvi9w3xN2hUztS5Pd0u4AE+gKwNcljj3llkU+H1BRM6h8SZxmTIdJGBOcrN1m9YNJTk7ZEsa6HsfeUjGJuAb9XStJMHNlNU3hixmTYZqsqPp91V7Swv11WM4EVCowTJoP1l0Jo7WkTTKHC9MaJhrbJzjmFE1dHkK+qFagqWPCsFX8Su0KsXUWO/+Mm1swR59bNB1FW62V5GDVulktXaE5R6dTyCPFPMIgnhzJxoNgmwYJ8Stt0il4U=
