{
"db": {
  "name": "db",
  "connector": "memory",
  "file": "projectData.json"
},
"stage-db": {
  "name": "stage-db",
  "localStorage": "",
  "file": "projectData.json",
  "connector": "memory"
},
"stage-elastic": {
  "name": "stage-elastic",
  "connector": "rest",
  "debug": false,
  "crud": true,
  "operations": [
    {
      "template": {
        "method": "POST",
        "url": "http://52.3.92.237:9200/projects/_search",
        "headers": {
          "accepts": "application/json",
          "content-type": "application/json"
        },
        "query": {
           "x": "{params}"
         },
        "body": {
          "query":{
             "bool" : {
                 "must" : [ {
                     "multi_match" : {
                       "query":      "{params}",
                       "fields":     ["project_name^3","project_description^2", "content"],
                       "operator":   "or",
                       "fuzziness" : "AUTO",
                       "prefix_length" : "1"
                     }
                 } ],
                 "should" : {
                     "match_phrase" : {
                         "_all" : "{params}"
                     }
                 }
             }
   },
   "size" : "1000"
        }
      },
      "functions": {
        "search": [
          "params"
        ]
      }
    },

    {
      "template": {
        "method": "GET",
        "url": "http://52.3.92.237:9200/projects/_search?q={id}",
        "headers": {
          "accepts": "application/json",
          "content-type": "application/json"
        },
        "query": {
           "x": "{x}"
         }
      },
      "functions": {
        "findById": [
          "id"
        ]
      }
    },

    {
      "template": {
        "method": "GET",
        "url": "http://54.174.236.98:5009/recommendation-service/api/v1/document_sim?docid={id}",
        "headers": {
          "accepts": "application/json",
          "content-type": "application/json"
        },
        "query": {
           "x": "{x}"
         }
      },
      "functions": {
        "findSimilarProjects": [
          "id"
        ]
      }
    },

    {
      "template": {
        "method": "POST",
        "url": "http://52.3.92.237:9200/projects/_suggest?q={params}",
        "headers": {
          "accepts": "application/json",
          "content-type": "application/json"
        },
         "body":{
             "term-suggest" : {
                  "text" : "{params}",
                  "completion" : {
                      "field" : "suggest",
                      "size" : 10
                  }
              }
         }
      },
      "functions": {
        "findSuggestion": [
          "params"
        ]
      }
    },

    {
      "template": {
        "method": "GET",
        "url": "http://52.3.92.237:9200/{seg}/?q={params}",
        "headers": {
          "accepts": "application/json",
          "content-type": "application/json"
        },
        "query": {
           "x": "{params}",
           "seg":"{seg}"
         },
         "body":{
           "query":{
             "multi_match" : {
                  "query":      ["params","seg"],
                  "fields":     ["project_name","language","project_description"],
                  "operator":   "or"
              }
           }
         }
      },
      "functions": {
        "findTestEs": [
          "seg","params"
        ]
      }
    },
    {
      "template": {
        "method": "GET",
        "url": "http://52.3.92.237:9200/projects/_search",
        "headers": {
          "accepts": "application/json",
          "content-type": "application/json"
        },
        "body": {
          "size":1000
        }
      },
      "functions": {
        "find": []
      }
    },
    {
      "template": {
        "method": "GET",
        "url": "http://52.3.92.237:9200/projects/_search",
        "headers": {
          "accepts": "application/json",
          "content-type": "application/json"
        },
        "body": {
          "sort" : { "rank" : { "order" : "desc" }},
          "size":20
        }
      },
      "functions": {
        "searchByPopularity":[]
      }
    }
  ]
}
}
