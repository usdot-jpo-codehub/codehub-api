{
"db": {
  "name": "db",
  "connector": "memory",
  "file": "projectData.json"
},
"stage-db": {
  "name": "stage-db",
  "localStorage": "",
  "file": "projectData.json",
  "connector": "memory"
},
"stage-elastic": {
  "name": "stage-elastic",
  "connector": "rest",
  "debug": false,
  "crud": true,
  "operations": [
    {
      "template": {
        "method": "POST",
        "url": "http://52.90.231.61:9200/projects/_search",
        "headers": {
          "accepts": "application/json",
          "content-type": "application/json"
        },
        "query": {
           "x": "{params}"
         },
        "body": {
          "query":{
             "bool" : {
                 "must" : [ {
                     "multi_match" : {
                       "query":      "{params}",
                       "fields":     ["project_name^3","project_description^2", "content"],
                       "operator":   "or",
                       "fuzziness" : "AUTO",
                       "prefix_length" : "1"
                     }
                 } ],
                 "should" : {
                     "match_phrase" : {
                         "_all" : "{params}"
                     }
                 }
             }
   },
   "size" : "1000"
        }
      },
      "functions": {
        "search": [
          "params"
        ]
      }
    },

    {
      "template": {
        "method": "GET",
        "url": "http://52.90.231.61:9200/projects/logs/{id}",
        "headers": {
          "accepts": "application/json",
          "content-type": "application/json"
        },
        "query": {
           "x": "{x}"
         }
      },
      "functions": {
        "findById": [
          "id"
        ]
      }
    },
    {

      "template": {
        "method": "GET",
        "url": "http://54.82.43.15:5009/recommendation-service/api/v1/document_sim_dev?docid={id}",
        "headers": {
          "accepts": "application/json",
          "content-type": "application/json"
        },
        "query": {
           "x": "{x}"
         }
      },
      "functions": {
        "findSimilarProjects": [
          "id"
        ]
      }
    },

    {
      "template": {
        "method": "POST",
        "url": "http://52.90.231.61:9200/projects/_suggest",
        "headers": {
          "accepts": "application/json",
          "content-type": "application/json"
        },
         "body":{
             "term-suggest" : {
                  "text" : "{params}",
                  "completion" : {
                      "field" : "suggest",
                      "size" : 10
                  }
              }
         }
      },
      "functions": {
        "findSuggestion": [
          "params"
        ]
      }
    },

    {
      "template": {
        "method": "GET",
        "url": "http://52.90.231.61:9200/projects/logs/{id}",
        "headers": {
          "accepts": "application/json",
          "content-type": "application/json",
          "User-Agent":""
        },
        "query": {
           "x": "{x}"
         }
      },
      "functions": {
        "findProjectDependencies": [
          "id"
        ]
      }
    },
    {
      "template": {
        "method": "GET",
        "url": "http://52.90.231.61:9200/projects/_search",
        "headers": {
          "accepts": "application/json",
          "content-type": "application/json"
        },
        "body": {
          "size":1000
        }
      },
      "functions": {
        "find": []
      }
    },
    {
      "template": {
        "method": "GET",
        "url": "http://52.90.231.61:9200/projects/_search",
        "headers": {
          "accepts": "application/json",
          "content-type": "application/json"
        },
        "body": {
          "sort" : { "rank" : { "order" : "desc" }},
          "size":20
        }
      },
      "functions": {
        "searchByPopularity":[]
      }
    }
  ]
}
}
